<!DOCTYPE html>
<html lang='ko'>
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="dueto park"/>
    <meta name="keywords" content="javascript, 참조, 복사"/>
    <meta name="description" content="참조와 복사의 차이, 참조를 끊고 객체를 복사하는 방법에 대해 알아봅시다!"/>
    <meta name="Location" content="포도와 고구마의 고장"/>

    <title>참조와 복사</title>

    <!-- 참조와 복사 -->
    <link href='https://spoqa.github.io/spoqa-han-sans/css/SpoqaHanSansNeo.css' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="../../css/common/font.css">
    <link rel="stylesheet" href="../../css/default/reset-css.css">
    <link rel="stylesheet" href="../../css/common/grid.min.css">
    <link rel="stylesheet" href="../../css/common/common.css">
    <link rel="stylesheet" href="../../css/common/common-media-query.css">
    <link rel="stylesheet" href="../../css/animation/modal-animation.css">
    <link rel="stylesheet" href="../../css/javascript/javascript.css">
    <link rel="stylesheet" href="../../css/javascript/javascript-media-query.css">

    <!-- 데이터 -->
    <script src='../../assets/data.js'></script>
  </head>

  <body>
    <header class='note-header' aria-label="페이지 조작 영역">
      <div class='container'>
        <!-- 홈으로 이동 -->
        <h1 class='note-header-title' aria-labelledby="go-to-home">
          <a id="go-to-home" href='../../기초튼튼이가탄.html'>
            <span aria-hidden="true">🔥</span>
            기초튼튼 이가탄 <span class="hidden-inline">홈으로 이동</span>
            <span aria-hidden="true">🔥</span>
          </a>
        </h1>

        <!-- 야간 모드로 전환 -->
        <section class='toggle-button-group' aria-labelledby="toggle-button">
          <span class='toggle-button-title' aria-hidden="true">Day/Night Switch</span>
          <button id="toggle-button" class='toggle-button' type='button' aria-label="야간모드 켜기" aria-controls="page-mode-state"></button>
          <p id="page-mode-state" class="hidden" aria-live="polite">
            야간 모드 꺼짐
          </p>
        </section>

        <!-- 다른 페이지로 이동 -->
        <nav class='note-header-nav' aria-labelledby="note-header-nav-title">
          <h2 id="note-header-nav-title" class='hidden note-header-nav-title' aria-hidden="true">다른 페이지로 이동</h2>
          <ol class='note-header-nav-list' aria-label="주제 선택" role="tablist">
            <li class='note-header-nav-list-items' role="none">
              <button type='button' role="tab" aria-controls="go-to-page-div-html">html</button>
            </li>
            <li class='note-header-nav-list-items' role="none">
              <button type='button' role="tab" aria-controls="go-to-page-div-css">css</button>
            </li>
            <li class='note-header-nav-list-items' role="none">
              <button type='button' role="tab" aria-controls="go-to-page-div-js">javascript</button>
            </li>
          </ol>


          <article id="go-to-pages" class="hidden" aria-hidden="true" aria-labelledby="select-chapter">
            <h2 id="select-chapter" class="hidden">챕터 선택 모달 열림</h2>

            <button class="go-to-pages-close" type="button" aria-label="모달 닫기"></button>

            <div id="go-to-page-div-html" class="go-to-page-div hidden" role="tabpanel" aria-labelledby="html-button">
              <h3 class="go-to-page-title" aria-hidden="true">
                <span aria-hidden="true">😈</span>html
              </h3>
              <ol id="go-to-page-html" class="go-to-page-list" role="menu">
                <!-- ../../assets/app/create.js (state.네비게이션.html) -->
              </ol>
            </div>

            <div id="go-to-page-div-css" class="go-to-page-div hidden" role="tabpanel" aria-labelledby="css-button">
              <h3 class="go-to-page-title">
                <span aria-hidden="true">😇</span>CSS
              </h3>
              <ol id="go-to-page-css" class="go-to-page-list">
                <!-- ../../assets/app/create.js (state.네비게이션.css) -->
              </ol>
            </div>

            <div id="go-to-page-div-js" class="go-to-page-div hidden" role="tabpanel" aria-labelledby="js-button">
              <h3 class="go-to-page-title">
                <span aria-hidden="true">😎</span>Javascript
              </h3>
              <ol id="go-to-page-javascript" class="go-to-page-list">
                <!-- ../../assets/app/create.js (state.네비게이션.javascript) -->
              </ol>
            </div>
          </article>
        </nav>
      </div>
    </header>

    <main class='note-main' aria-label="본문 영역">
      <section class='container' aria-labelledby="main-title">
        <h2 id="main-title" class='main-title'>
          <strong>
            <span class='main-title' aria-hidden="true">👿</span>
            참조와 복사
            <span class='main-title' aria-hidden="true">👿</span>
          </strong>
        </h2>

        <article class='summary' aria-labelledby="summary-title">
          <h3 id="summary-title" class='main-article-title'>
            <span class='main-article-title' aria-hidden="true">👽</span>
            개요
          </h3>
          <p>
            참조와 복사의 차이, 참조를 끊고 객체를 복사하는 방법에 대해 알아보자.
          </p>
        </article>

        <article class='copy-reference' aria-labelledby="copy-reference-title">
          <h3 id="copy-reference-title" class='main-article-title'>
            <span class='main-article-title' aria-hidden="true">🙋</span>
            복사와 참조
          </h3>
          <div class="primitive-value-assignment">
            <p class='margin-8px'>
              원시값(숫자, 문자형, 불린)을 저장하는 예시를 보자.
            </p>
            <pre class="main-article-pre background-white-radius margin-8px">
              <code>
                var 원본 = '나는 오이';
                var 복사 = 값;

                console.log(복사); // 나는 오이
                복사 = '고구만데요?'
                console.log(복사); // 고구만데요?
                console.log(원본); // 나는 오이
              </code>
            </pre>
            <p>
              숫자, 문자형, 불린은 대입하면 값을 복사한다. 그리고 변수마다 각자의 일을 한다.<br/>
            </p>
          </div>
          <div class="object-assignment">
            <p class='margin-8px'>
              객체(객체, 배열, 함수)일때에는 다르다.
            </p>
            <p class='margin-16px'>
              <strong class="underline">
                객체는 대입하면 참조 관계가 된다. 참조 관계는 한 쪽 변수의 특정 값을 수정하면 나머지 변수에 수정사항이 반영됨을 의미한다.
              </strong>
              <br/>
              다음의 예시를 보면 이해가 쉽다.
            </p>
            <ol aria-label="객체 세 가지 예시">
              <li class="main-article-list-items margin-16px">
                <div class="list-item-title">
                  <span aria-hidden="true">&lt;</span>
                  객체 예시
                  <span aria-hidden="true">&gt;</span>
                </div>
                <pre class="main-article-pre background-white-radius margin-8px">
                  <code>
                    var 오이 = {
                      친구: "고구마",
                    };

                    var 귤 = 오이;
                    console.log(귤.친구); // 고구마

                    귤.친구 = "저는 친구 없어요";

                    console.log(귤.친구); // 저는 친구 없어요
                    console.log(오이.친구); // 저는 친구 없어요
                  </code>
                </pre>
                <div class="code-desc">
                  <p class="hyphen">
                    귤에 오이를 대입했다. 객체를 대입했으므로 참조 관계가 된다.
                  </p>
                  <p class="hyphen">
                    귤의 '친구'속성 값을 변경하면, 오이의 '친구'속성 값도 변경된다.
                  </p>
                </div>
              </li>
              <li class="main-article-list-items margin-16px">
                <div class="list-item-title">
                  <span aria-hidden="true">&lt;</span>
                  배열 예시
                  <span aria-hidden="true">&gt;</span>
                </div>
                <pre class="main-article-pre background-white-radius margin-8px">
                  <code>
                    var 쌉니다싸요 = ["포도", "오렌지", "수박"];

                    var 살래요 = 쌉니다싸요;
                    console.log(살래요); // ["포도", "오렌지", "수박"]

                    살래요[0] = '사과';

                    console.log(살래요); // ["사과", "오렌지", "수박"]
                    console.log(쌉니다싸요); // ["사과", "오렌지", "수박"]
                  </code>
                </pre>
                <div class="code-desc">
                  <p class="hyphen">
                    살래요에 쌉니다싸요를 대입했다. 객체(배열)를 대입했으므로 참조 관계가 된다.
                  </p>
                  <p class="hyphen">
                    살래요의 0번 요소를 '사과'로 수정해서, 쌉니다싸요의 0번 요소도 '사과'로 변한다.
                  </p>
                </div>
              </li>
              <li class="main-article-list-items">
                <div class="list-item-title">
                  <span aria-hidden="true">&lt;</span>
                  함수 예시
                  <span aria-hidden="true">&gt;</span>
                </div>
                <pre class="main-article-pre background-white-radius margin-8px">
                  <code>
                    var 기영이 = function() {};
                    기영이.바나나 = '고소한 맛이 나고';

                    var 기철이 = 기영이;
                    console.log(기철이.바나나); // 고소한 맛이 나고

                    기철이.바나나 = '만찐두빵으로 바꿔줘요';
                    console.log(기철이.바나나); // 만찐두빵으로 바꿔줘요
                    console.log(기영이.바나나); // 만찐두빵으로 바꿔줘요
                  </code>
                </pre>
                <div class="code-desc">
                  <p class="hyphen">
                    기철이에 기영이를 대입했다. 객체(함수)를 대입했으므로 참조 관계가 된다.
                  </p>
                  <p class="hyphen">
                    기철이의 '바나나'속성 값을 '만찐두빵으로 바꿔줘요'로 수정해서, 기영이의 '바나나'속성 값도 '만찐두빵으로 바꿔줘요'가 된다.
                  </p>
                </div>
              </li>
            </ol>
          </div>
        </article>

        <article class='object-copy' aria-labelledby="object-copy-title">
          <h3 id="object-copy-title" class='main-article-title'>
            <span class='main-article-title' aria-hidden="true">💌</span>
            객체 복사
          </h3>
          <p class="margin-8px">
            세 가지 방법이 있다.<br/>
            값을 직접 넣는 방법, forEach를 사용하는 방법, JSON을 사용하는 방법이다.
          </p>
          <p class="margin-8px">
            <strong class="underline">
              예시를 보기 전에, 빈 객체 선언은 '이건 독립된 객체입니다'라는 의미를 내포한다는 점을 기억하자.
            </strong>
          </p>
          <p class="margin-8px">
            그리고 객체에 '값'을 대입하는 건 복사가 된다.<br/>
            아래에 예시를 보면 이해하기 쉽다.
          </p>
          <ol aria-label="객체 복사 방법">
            <li class="main-article-list-items margin-16px">
              <div class="list-item-title">
                <span aria-hidden="true">&lt;</span>
                값 직접 넣기
                <span aria-hidden="true">&gt;</span>
              </div>
              <pre class="main-article-pre background-white-radius">
                <code>
                  var 원본 = {a: 1, b: 2};
                  var 복사본 = {};
                  복사본.a = 원본.a;
                  복사본.b = 원본.b;
                  console.log(복사본.a, 복사본.b); // 1 2

                  복사본.a = 3;
                  console.log(복사본.a); // 3
                  console.log(원본.a); // 1
                </code>
              </pre>
            </li>
            <li class="main-article-list-items margin-16px">
              <div class="list-item-title">
                <span aria-hidden="true">&lt;</span>
                forEach 사용하기
                <span aria-hidden="true">&gt;</span>
              </div>
              <pre class="main-article-pre background-white-radius margin-8px">
                <code>
                  var 원본 = {a: 1, b: 2, c: 3};
                  var 복사본 = {};
                  console.log(Object.keys(원본));
                  // ["a", "b", "c"]
                  // Object.keys는 객체의 속성명을 배열로 바꿔준다.

                  Object.keys(원본).forEach(function(키) {
                    복사본[키] = 원본[키];
                  });

                  복사본.a = 77;
                  console.log(복사본.a); // 77
                  console.log(원본.a); // 1
                </code>
              </pre>
              <p class="margin-8px">
                하지만 forEach도 완전한 방법은 아니다. 다음 예시를 보면서 왜 완전하지 않은지 확인해보자.
              </p>
              <pre class="main-article-pre background-white-radius margin-8px">
                <code>
                  var 오이 = {a: 1, b: {c: 1}};
                  var 토마토 = {}; // 빈 객체 선언
                  Object.keys(오이).forEach(function(키) {
                    토마토[키] = 오이[키];
                  });

                  토마토.a = 7;
                  console.log(토마토.a); // 7
                  console.log(오이.a); // 1

                  토마토.b.c = "똥";
                  console.log(토마토.b.c); //똥
                  console.log(오이.b.c); //똥
                </code>
              </pre>
              <div class="code-desc">
                <p class="margin-8px">
                  똥이 나왔다. 오이.b.c는 1이 나와야 하는데!<br/>
                  코드를 풀어서 써보자.<br/>
                  토마토.a = 오이.a; // a속성의 값은 원시값이라 복사됨.<br/>
                  토마토.b = 오이.b; // b속성의 값은 객체라서 참조됨.
                </p>
                <p>
                  데이터가 계층구조(객체안에 객체)이면, forEach를 해도 완전히 복사되지 않는다.<br/>
                  <strong class="underline">
                    원시값은 복사되고 객체는 참조된다는 특성 때문이다.
                  </strong>
                  <br/>
                  이 문제는 JSON을 사용하는 방법으로 해소할 수 있다.
                </p>
              </div>
            </li>
            <li class="main-article-list-items">
              <div class="list-item-title">
                <span aria-hidden="true">&lt;</span>
                JSON 사용하기
                <span aria-hidden="true">&gt;</span>
              </div>
              <pre class="main-article-pre background-white-radius margin-8px">
                <code>
                  var 원본 = {a: 1, b: {c: 1}};
                  var 복사본 = JSON.parse(JSON.stringify(원본));
                </code>
              </pre>
              <div class="code-desc">
                <p class="hyphen">
                  참조관계를 끊고 복사한다.
                </p>
                <p class="hyphen">
                  이것도 완전하진 않다. 그래도 원본객체가 2단계 이상이면 사용하도록 하자.
                </p>
                <p class="hyphen">
                  성능이 최악이니 최대한 안 쓰는게 좋다.
                </p>
              </div>
            </li>
          </ol>
        </article>

        <article class='reference-check' aria-labelledby="reference-check-title">
          <h3 id="reference-check-title" class='main-article-title'>
            <span class='main-article-title' aria-hidden="true">💧</span>
            참조관계인지 확인
          </h3>
          <p class="margin-8px">
            변수들이 참조관계인지 알고싶다면 비교연산자로 비교하면된다. true면 참조관계다.
          </p>
          <p class="margin-8px">
            <strong class="order">
              console.log(원본 === 복사본); //true
            </strong>
          </p>
          <p class="margin-8px">
            모양이 같아도 위의 코드가 모두 true를 출력하진 않는다.
          </p>
          <p class="margin-8px">
            위에서 언급했듯이 객체는 괄호를 써넣는 순간에 서로 다른 객체라는 의미를 내포한다.
          </p>
          <p class="margin-8px">
            객체를 대입하면 참조관계로 변환된다.
          </p>
          <pre class="main-article-pre background-white-radius">
            <code>
              var 포도 = {a: 1, b: 2, c: 3};
              var 망고 = {a: 1, b: 2, c: 3};

              console.log(포도 === 망고); //false

              망고 = 포도;

              console.log(포도 === 망고); //true
            </code>
          </pre>
        </article>

        <article class='shallow-deep-copy' aria-labelledby="shallow-deep-copy-title">
          <h3 id="shallow-deep-copy-title" class='main-article-title'>
            <span class='main-article-title' aria-hidden="true">💬</span>
            얕은 복사 깊은 복사
          </h3>
          <p class="margin-8px">
            <strong class="underline">
              앞으로 참조는 '얕은 복사', 복사는 '깊은 복사'라 표현하자.
            </strong>
          </p>
          <pre class="main-article-pre background-white-radius margin-8px">
            <code>
              var 오이 = {친구: "고구마", 특징: "오이다"};
              var 오이친구 = ["옥수수", "당근", "고구마"];
            </code>
          </pre>
          <div class="code-desc margin-8px">
            <p class="margin-8px">
              위의 코드처럼 객체 안에 객체가 없는 것을 1단계 객체라고 표현한다.
            </p>
            <p>
              forEach와 slice는 1단계는 깊은 복사하고 나머지(객체 안의 객체)는 얕은 복사한다. 그러므로 1단계 객체를 대상으로 깊은 복사를 해야한다면 forEach와 slice를 이용하자.
            </p>
          </div>
          <div class="another-way">
            <p class="margin-8px">
              forEach와 유사한 방법으로 Object.assign이 있다. 1단계 깊은 복사 하는 간결한 명령어다.<br/>
            </p>
            <pre class="main-article-pre background-white-radius">
              <code>
                //forEach 문
                Object.keys(obj).forEach(function(key) {
                  obj2[key] = obj [key];
                });

                //Object.assign 문
                Object.assign(obj2, obj);
              </code>
            </pre>
          </div>
        </article>
      </section>
    </main>

    <footer class='note-footer'>
      <div class='container'>
        <blockquote class='note-footer-reference'
          cite='https://www.youtube.com/watch?v=vV6Le05CJ1U&list=PLcqDmjxt30Rtbxbh4eJREOVekql_kWVmu&index=78'>
          <strong class='note-footer-reference-name'>
            정보 출처: "Youtube - ZeroCho의 JS 중급 강좌 11-5. 참조와 복사", Youtube, 2021년 3월 11일 접속,
          </strong>
          <cite class='note-footer-reference-url'>
            <a href='https://www.youtube.com/watch?v=vV6Le05CJ1U&list=PLcqDmjxt30Rtbxbh4eJREOVekql_kWVmu&index=78'>
              https://www.youtube.com/watch?v=vV6Le05CJ1U&list=PLcqDmjxt30Rtbxbh4eJREOVekql_kWVmu&index=78
            </a>
          </cite>
        </blockquote>

        <blockquote class='note-footer-reference'
          cite='https://gist.github.com/rxaviers/7360908'>
          <strong class='note-footer-reference-name'>
            이모티콘 출처: "rxaviers github / gist:7360908 repository", Github, 2021년 3월 11일 접속,
          </strong>
          <cite class='note-footer-reference-url'>
            <a href='https://gist.github.com/rxaviers/7360908'>
              https://gist.github.com/rxaviers/7360908
            </a>
          </cite>
        </blockquote>
      </div>
    </footer>

    <!-- 요소 생성 -->
    <script src='../../assets/app/create.js'></script>
    <!-- 동작 -->
    <script src='../../assets/app/app.js'></script>
    <script src="../../assets/app/modal.js"></script>
  </body>
</html>
